"use strict";(self.webpackChunkuser=self.webpackChunkuser||[]).push([[782],{9782:(O,p,r)=>{r.r(p),r.d(p,{TasksModule:()=>M});var g=r(6895),l=r(4843),t=r(4650),k=r(5412),C=r(4006),h=r(529),u=r(1350);let f=(()=>{class s{constructor(e){this.http=e}getUserTasks(e,a){let n=new h.LE;return Object.entries(a).forEach(([i,m])=>{n=n.append(i,m)}),this.http.get(u.N.baseApi+"/tasks/user-tasks/"+e,{params:n})}taskComplete(e){return this.http.put(u.N.baseApi+"/tasks/complete",e)}taskDetail(e){return this.http.get(u.N.baseApi+"/tasks/task/"+e)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(h.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var T=r(7185),c=r(4859),d=r(4333);function v(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div")(3,"img",7),t.NdJ("error",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.onImageError(n))}),t.qZA(),t.TgZ(4,"div",8)(5,"h2",9),t._uU(6),t.qZA(),t.TgZ(7,"p",10),t._uU(8),t.qZA(),t.TgZ(9,"p",11),t._uU(10),t.qZA(),t.TgZ(11,"a",12),t._uU(12,"Details"),t.qZA(),t.TgZ(13,"button",13),t.NdJ("click",function(){const i=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.complete(i))}),t._uU(14,"Complete"),t.qZA()()()()()}if(2&s){const e=o.$implicit,a=t.oxw();t.xp6(3),t.Q6J("src",a.getImageUrl(e.image),t.LSH),t.xp6(3),t.Oqu(e.title),t.xp6(2),t.hij("Dead-Line Date : ",e.deadline,""),t.xp6(2),t.Oqu(e.description),t.xp6(1),t.MGl("routerLink","/tasks/detailTask/",e._id,"")}}const x=function(s,o){return{id:"tasks",itemsPerPage:5,currentPage:s,totalItems:o}};function _(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",8)(1,"img",9),t.NdJ("error",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.onImageError(n))}),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("src",e.getImageUrl(null==e.TaskDetail?null:e.TaskDetail.image),t.LSH)}}const D=[{path:"",component:(()=>{class s{constructor(e,a,n,i){this.dialog=e,this.fb=a,this.tasks_service=n,this.toastr=i,this.users=[{name:"Moahmed",id:1},{name:"Ali",id:2},{name:"Ahmed",id:3},{name:"Zain",id:4}],this.status=[{name:"Complete",id:1},{name:"In-Prossing",id:2}],this.displayedColumns=["position","title","user","deadLineDate","status","actions"],this.dataSource=[],this.page=1,this.total=0,this.selectedStatus="In-Progress"}ngOnInit(){this.createform(),this.getUserData(),this.getAllTasks()}createform(){this.tasksFilter=this.fb.group({title:[""],userId:[""],fromDate:[""],toDate:[""]})}getUserData(){let e=JSON.stringify(localStorage.getItem("tokenUserCrud"));this.userData=JSON.parse(window.atob(e.split(".")[1])),console.log(this.userData)}getAllTasks(){this.tasks_service.getUserTasks(this.userData.userId,{page:this.page,status:this.selectedStatus}).subscribe(a=>{console.log(a),this.dataSource=a.tasks,this.total=a.tasks.length,console.log(a.tasks.length)})}changePage(e){this.page=e,this.getAllTasks()}complete(e){this.tasks_service.taskComplete({id:e._id}).subscribe(n=>{this.toastr.success("success","task completed sucessfully"),this.getAllTasks()})}getImageUrl(e){return e?"https://crud-wxxm.onrender.com/"+e:"../../../../../assets/images/login-task.jpeg"}onImageError(e){e.target.src="../../../../../assets/images/login-task.jpeg"}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(k.uw),t.Y36(C.qu),t.Y36(f),t.Y36(T._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-tasks"]],decls:6,vars:7,consts:[[1,"mt-4","container"],[1,"row"],["class","col-lg-3 col-md-4 col-sm-12",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["id","tasks",1,"fw-bold","py-2",3,"pageChange"],[1,"col-lg-3","col-md-4","col-sm-12"],[1,"card","mt-3"],["alt","",3,"src","error"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"text-dark"],["mat-raised-button","",1,"text-dark",3,"routerLink"],["mat-raised-button","",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,v,15,5,"div",2),t.ALo(3,"paginate"),t.TgZ(4,"div",3)(5,"pagination-controls",4),t.NdJ("pageChange",function(i){return a.changePage(i)}),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.xi3(3,1,a.dataSource,t.WLB(4,x,a.page,a.total))))},dependencies:[g.sg,l.rH,c.zs,c.lW,d.LS,d._s],styles:["button[_ngcontent-%COMP%]{color:#fff;margin:0 5px}button.addTask[_ngcontent-%COMP%]{background-color:#19a7ce;color:#fff;padding:2px 23px;font-size:20px}button[_ngcontent-%COMP%]{background-color:#19a7ce!important;color:#fff!important}[_nghost-%COMP%]     table thead{background-color:#19a7ce!important}[_nghost-%COMP%]     table thead .mat-header-cell{color:#fff}.w-20[_ngcontent-%COMP%]{width:20%!important}h2[_ngcontent-%COMP%]{color:#19a7ce}  a{color:var(--bs-link-color);text-decoration:none;color:#19a7ce}img[_ngcontent-%COMP%]{width:100%;height:180px}.card-body[_ngcontent-%COMP%]{background-color:#f6f1f1}"]}),s})()},{path:"detailTask/:id",component:(()=>{class s{constructor(e,a,n,i){this.activiteRoute=e,this.tasks_service=a,this.toastr=n,this.route=i,this.id=this.activiteRoute.snapshot.params.id,console.log(this.id)}ngOnInit(){this.tasks_service.taskDetail(this.id).subscribe(e=>{this.TaskDetail=e.tasks,console.log(this.TaskDetail)})}complete(){this.tasks_service.taskComplete({id:this.id}).subscribe(a=>{this.toastr.success("success","task completed sucessfully"),this.route.navigate(["/tasks"])})}getImageUrl(e){return e?"https://crud-wxxm.onrender.com/"+e:"../../../../../assets/images/login-task.jpeg"}onImageError(e){e.target.src="../../../../../assets/images/login-task.jpeg"}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.gz),t.Y36(f),t.Y36(T._W),t.Y36(l.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-task-details"]],decls:13,vars:4,consts:[[1,"container","bg-white"],["class","imageBox",4,"ngIf"],[1,"content"],[1,"d-flex","justify-content-between","align-items-baseline","mt-3"],[1,"text-black"],["mat-raised-button","",3,"click"],[1,"text-info"],[1,"text-black","pb-4"],[1,"imageBox"],["alt","",1,"w-100",3,"src","error"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.YNc(1,_,2,1,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"h1",4),t._uU(5),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return a.complete()}),t._uU(7,"Complete"),t.qZA()(),t.TgZ(8,"p",4),t._uU(9),t.qZA(),t._UZ(10,"hr",6),t.TgZ(11,"p",7),t._uU(12),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",a.TaskDetail),t.xp6(4),t.Oqu(null==a.TaskDetail?null:a.TaskDetail.title),t.xp6(4),t.hij("Dead-Line Date : ",null==a.TaskDetail?null:a.TaskDetail.deadline,""),t.xp6(3),t.Oqu(null==a.TaskDetail?null:a.TaskDetail.description))},dependencies:[g.O5,c.lW],styles:[".imageBox[_ngcontent-%COMP%], .imageBox[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50vh}button[_ngcontent-%COMP%]{background-color:#19a7ce!important;color:#fff!important}"]}),s})()}];let Z=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[l.Bz.forChild(D),l.Bz]}),s})(),M=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[g.ez,Z,k.Is,c.ot,d.JX]}),s})()}}]);